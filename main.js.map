{"version":3,"file":"main.js","mappings":"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","sources":["webpack://timeline/./src/js/posts.js","webpack://timeline/./src/js/Post.js","webpack://timeline/./src/js/Tooltip.js","webpack://timeline/./src/js/Popover.js","webpack://timeline/./src/js/Timeline.js","webpack://timeline/./src/js/app.js","webpack://timeline/./src/index.js"],"sourcesContent":["const posts = [];\n\nexport default posts;\n","export default class Post {\n  constructor(date, content, coords) {\n    this.date = date;\n    this.content = content;\n    this.coords = coords;\n  }\n}\n","export default class Tooltip {\n  constructor() {\n    this.tooltips = [];\n    this.errors = {\n      coords: {\n        valueMissing: 'Введите координаты',\n        patternMismatch: 'Неправильный формат координат',\n      },\n    };\n  }\n\n  // Создаем подсказку\n  renderTooltip(message, input) {\n    const tooltipEl = document.createElement('div');\n    tooltipEl.classList.add('message__tooltip');\n    tooltipEl.textContent = message;\n\n    const id = performance.now();\n\n    this.tooltips.push({\n      id,\n      element: tooltipEl,\n    });\n\n    const { left, bottom } = input.getBoundingClientRect();\n\n    tooltipEl.style.left = `${left}px`;\n    tooltipEl.style.top = `${bottom}px`;\n    document.body.append(tooltipEl);\n\n    return id;\n  }\n\n  // Удаляем подсказку\n  removeTooltip(id) {\n    const tooltip = this.tooltips.find((obj) => obj.id === id);\n    tooltip.element.remove();\n\n    this.tooltips = this.tooltips.filter((obj) => obj.id !== id);\n  }\n}\n","import Tooltip from './Tooltip';\n\nexport default class Popover {\n  constructor() {\n    this.popover = null;\n    this.tooltip = new Tooltip();\n    this.actualTooltips = [];\n\n    this.showTooltip = this.showTooltip.bind(this);\n    this.saveItem = this.saveItem.bind(this);\n    this.closePopover = this.closePopover.bind(this);\n  }\n\n  // Открываем popover\n  showPopover() {\n    if (this.popover) return;\n    this.drawPopover();\n\n    this.form = this.popover.querySelector('.message__form');\n    this.inputCoords = this.form.querySelector('[name=\"coords\"]');\n    this.btnSave = this.form.querySelector('.message__btn-save');\n    this.btnCancel = this.form.querySelector('.message__btn-cancel');\n\n    this.addEvents();\n  }\n\n  drawPopover() {\n    this.popover = document.createElement('div');\n    this.popover.classList.add('message');\n    this.popover.innerHTML = `\n      <div class=\"message__container\">\n        <p>Что-то пошло не так</p>\n        <p>К сожалению, не удалось определить ваше местоположение, пожалуйста,\n          дайте разрешение на использование геолокации, либо введите координаты вручную.\n        </p>\n        <form class=\"message__form\">\n          <input name=\"coords\" class=\"message__input\" placeholder=\"пример: [51.50851, -0.12572]\" pattern=\"^\\\\[?(-?\\\\d+\\\\.\\\\d+), ?(-? ?\\\\d+\\\\.\\\\d+)\\\\]?$\" required> \n          <div class=\"message__buttons\">\n            <button type=\"button\" class=\"message__btn message__btn-cancel\">Отмена</button>\n            <button class=\"message__btn message__btn-save\">OK</button>\n          </div>\n        </form>\n      </div>\n    `;\n\n    document.body.append(this.popover);\n  }\n\n  // Добавляем обработчики событий\n  addEvents() {\n    this.form.addEventListener('submit', this.saveItem);\n    this.inputCoords.addEventListener('input', this.showTooltip);\n    this.btnCancel.addEventListener('click', this.closePopover);\n  }\n\n  // Показываем подсказку\n  showTooltip(e) {\n    const { target } = e;\n    const existingTooltip = this.actualTooltips.find((tip) => tip.name === target.name);\n    const currentError = this.getError(target);\n\n    // Если есть уже такая же ошибка, ничего не меняем\n    if (existingTooltip && existingTooltip.error === currentError) {\n      return;\n    }\n\n    // Если есть подсказка, но ошибка другая, удаляем старую подсказку\n    if (existingTooltip) {\n      this.tooltip.removeTooltip(existingTooltip.id);\n      this.actualTooltips = this.actualTooltips.filter((tip) => tip.name !== target.name);\n    }\n\n    // Если есть новая ошибка, создаем новую подсказку\n    if (currentError) {\n      this.createTooltip(target, currentError);\n    }\n  }\n\n  // Создаем подсказку\n  createTooltip(el, errorText) {\n    this.actualTooltips.push({\n      name: el.name,\n      id: this.tooltip.renderTooltip(errorText, el),\n      error: errorText,\n    });\n  }\n\n  // Находим тип ошибки\n  getError(el) {\n    const errorKey = Object.keys(ValidityState.prototype).find((key) => {\n      if (!el.name) return false;\n      if (key === 'valid') return false;\n\n      return el.validity[key];\n    });\n\n    if (!errorKey) return null;\n\n    return this.tooltip.errors[el.name][errorKey];\n  }\n\n  // Публикуем пост при отправке формы popover\n  saveItem(e) {\n    e.preventDefault();\n    const { value } = this.inputCoords;\n    if (this.actualTooltips.length > 0) {\n      this.actualTooltips.forEach((tip) => this.tooltip.removeTooltip(tip.id));\n      this.actualTooltips = [];\n    }\n\n    const { elements } = this.form;\n    const hasInvalidInput = [...elements].some((el) => {\n      const error = this.getError(el);\n      if (error) {\n        this.createTooltip(el, error);\n        return true;\n      }\n\n      return false;\n    });\n\n    if (hasInvalidInput) return;\n\n    this.publish(value);\n    this.closePopover();\n  }\n\n  // Удаляем popover\n  closePopover() {\n    if (this.actualTooltips.length > 0) {\n      this.actualTooltips.forEach((tip) => this.tooltip.removeTooltip(tip.id));\n      this.actualTooltips = [];\n    }\n\n    this.popover.remove();\n    this.popover = null;\n  }\n\n  // Создаем сообщение об ошибке\n  showMessage(text) {\n    this.message = document.createElement('div');\n    this.message.classList.add('message');\n    this.message.innerHTML = `\n      <div class=\"message__container\">\n        <p>${text}</p>\n        <button class=\"message__btn message__btn-ok\">OK</button>\n      </div>\n    `;\n\n    document.body.append(this.message);\n\n    this.btnOk = this.message.addEventListener('click', () => {\n      this.message.remove();\n    });\n  }\n}\n","import posts from './posts';\nimport Post from './Post';\nimport Popover from './Popover';\n\nexport default class Timeline {\n  constructor() {\n    this.container = null;\n\n    this.publishPost = this.publishPost.bind(this);\n    this.updateTimer = this.updateTimer.bind(this);\n\n    this.popover = new Popover();\n    this.popover.publish = this.publishPost;\n  }\n\n  init() {\n    this.bindToDom();\n    this.registerEvents();\n  }\n\n  bindToDom() {\n    this.container = document.querySelector('.timeline__container');\n\n    this.postsContainer = this.container.querySelector('.timeline__posts');\n    this.formForPost = this.container.querySelector('.timeline__form');\n    this.btnAudio = this.container.querySelector('.timeline__btn-audio');\n    this.btnVideo = this.container.querySelector('.timeline__btn-video');\n  }\n\n  registerEvents() {\n    this.formForPost.addEventListener('submit', (e) => this.createPost(e));\n    this.btnAudio.addEventListener('click', async () => this.startRecord('audio'));\n    this.btnVideo.addEventListener('click', () => this.startRecord('video'));\n  }\n\n  // Создаем новый пост\n  createPost(e) {\n    e.preventDefault();\n    const { target } = e;\n    const { value } = target.querySelector('.timeline__input');\n    this.content = {\n      type: 'text',\n      data: value,\n    };\n    this.getCoords();\n  }\n\n  // Запрашиваем разрешение на доступ к геолокации и публикуем пост\n  // Если пользователь не разрешил, то показываем всплывающее окно\n  getCoords() {\n    if (!navigator.geolocation) {\n      throw new Error('Geolocation not supported');\n    }\n\n    const success = (position) => {\n      const { longitude, latitude } = position.coords;\n      const coords = `[${latitude}, -${longitude}]`;\n      this.publishPost(coords);\n    };\n\n    const error = () => {\n      this.popover.showPopover();\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error);\n  }\n\n  // Создаем объект поста, отрисовываем его и очищаем форму\n  publishPost(coords) {\n    const date = this.getTimestamp();\n    const post = new Post(date, this.content, coords);\n    posts.push(post);\n    this.renderPosts();\n    this.formForPost.reset();\n  }\n\n  // Форматируем дату\n  getTimestamp() {\n    return `${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString().slice(0, 5)}`;\n  }\n\n  // Рендерим посты\n  renderPosts() {\n    [...this.postsContainer.querySelectorAll('.post')].forEach((post) => post.remove());\n    posts.forEach((post) => this.renderItem(post));\n  }\n\n  // Создаем HTML элемент поста\n  renderItem({ date, content, coords }) {\n    const { type, data } = content;\n\n    const postContent = type !== 'text' ? `<${type} src=\"${data}\" class=\"post__${type}\" controls></${type}>` : data;\n\n    const post = document.createElement('div');\n    post.classList.add('post');\n    post.innerHTML = `\n      <div class=\"post__timestamp\">\n        <span class=\"post__timestamp-icon\">\n          <img src=\"./images/calendar.svg\" alt=\"\">\n        </span>\n        ${date}\n      </div>\n      <div class=\"post__content\">${postContent}</div>\n      <div class=\"post__geolocation\">\n        <div class=\"post__coords\">${coords}</div>\n          <div class=\"post__geolocation-icon\">\n            <img src=\"./images/geo.svg\" alt=\"\">\n          </div>\n      </div> \n    `;\n\n    this.postsContainer.prepend(post);\n  }\n\n  // Отображаем кнопки записи и время записи\n  showRecordBtns() {\n    this.btns = this.formForPost.querySelector('.timeline__buttons');\n    this.btns.classList.add('timeline__buttons_hidden');\n\n    this.record = document.createElement('div');\n    this.record.classList.add('timeline__record', 'record');\n    this.record.innerHTML = `\n      <button type=\"button\" class=\"timeline__btn record__send\">\n        <img src=\"./images/send.svg\" alt=\"\">\n      </button>\n      <div class=\"record__timer\">00:00</div>\n      <button type=\"button\" class=\"timeline__btn record__cancel\">\n        <img src=\"./images/cancel.svg\" alt=\"\">\n      </button>\n    `;\n\n    this.formForPost.append(this.record);\n\n    this.timer = this.record.querySelector('.record__timer');\n    this.btnSendRecord = this.record.querySelector('.record__send');\n    this.btnCancelRecord = this.record.querySelector('.record__cancel');\n\n    this.btnCancelRecord.addEventListener('click', () => {\n      if (this.video) this.video.remove();\n      this.stopRecord();\n    });\n  }\n\n  // При клике по кнопке аудио/видео начинаем запись, запускаем время\n  async startRecord(typeRecord) {\n    this.showRecordBtns();\n    const obj = typeRecord === 'video' ? { video: true, audio: true } : { audio: true };\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia(obj);\n      const recorder = new MediaRecorder(stream);\n\n      if (typeRecord === 'video') {\n        this.video = document.createElement('video');\n        this.video.classList.add('timeline__video');\n        this.video.muted = true;\n        this.postsContainer.prepend(this.video);\n        this.video.srcObject = stream;\n\n        this.video.addEventListener('canplay', () => {\n          this.video.play();\n        });\n      }\n\n      const chunks = [];\n      recorder.addEventListener('start', () => {\n        console.log('start');\n      });\n\n      recorder.addEventListener('dataavailable', (event) => {\n        chunks.push(event.data);\n      });\n\n      recorder.addEventListener('stop', () => {\n        const blob = new Blob(chunks);\n        this.content = {\n          type: typeRecord,\n          data: URL.createObjectURL(blob),\n        };\n        this.getCoords();\n      });\n\n      recorder.start();\n      this.seconds = 0;\n      this.minutes = 0;\n      this.timerId = setTimeout(this.updateTimer, 1000);\n\n      // При клике по кнопке отправить, останавливаем запись\n      this.btnSendRecord.addEventListener('click', () => {\n        recorder.stop();\n        stream.getTracks().forEach((track) => track.stop());\n        if (this.video) this.video.remove();\n        this.stopRecord();\n      });\n    } catch (error) {\n      this.stopRecord();\n      if (error.name === 'NotAllowedError') {\n        this.popover.showMessage('Необходимо дать разрешение, чтобы осуществить запись видео/аудио');\n      }\n\n      if (error.name === 'NotFoundError') {\n        this.popover.showMessage('К сожалению, у Вас нет подключенных устройств видео/аудио');\n      }\n    }\n  }\n\n  // Обновляем время записи\n  updateTimer() {\n    clearTimeout(this.timerId);\n    this.seconds++;\n    if (this.seconds === 60) {\n      this.seconds = 0;\n      this.minutes++;\n\n      if (this.minutes === 60) return;\n    }\n    // Отображаем значения в формате MM:SS\n    const timeString = `${(`0${this.minutes}`).slice(-2)}:${(`0${this.seconds}`).slice(-2)}`;\n\n    this.timer.textContent = timeString;\n    setTimeout(this.updateTimer, 1000);\n  }\n\n  // Сбрасываем таймаут, удаляем кнопки записи\n  stopRecord() {\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n      this.timerId = null;\n    }\n\n    this.record.remove();\n    this.btns.classList.remove('timeline__buttons_hidden');\n  }\n}\n","import Timeline from './Timeline';\n\nconst app = new Timeline();\napp.init();\n","import './scss/app.scss';\nimport './js/app';\n"],"names":["posts","Post","constructor","date","content","coords","Tooltip","tooltips","errors","valueMissing","patternMismatch","renderTooltip","message","input","tooltipEl","document","createElement","classList","add","textContent","id","performance","now","push","element","left","bottom","getBoundingClientRect","style","top","body","append","removeTooltip","tooltip","find","obj","remove","filter","Popover","popover","actualTooltips","showTooltip","bind","saveItem","closePopover","showPopover","drawPopover","form","querySelector","inputCoords","btnSave","btnCancel","addEvents","innerHTML","addEventListener","e","target","existingTooltip","tip","name","currentError","getError","error","createTooltip","el","errorText","errorKey","Object","keys","ValidityState","prototype","key","validity","preventDefault","value","length","forEach","elements","hasInvalidInput","some","publish","showMessage","text","btnOk","Timeline","container","publishPost","updateTimer","init","bindToDom","registerEvents","postsContainer","formForPost","btnAudio","btnVideo","createPost","startRecord","type","data","getCoords","navigator","geolocation","Error","success","position","longitude","latitude","getCurrentPosition","getTimestamp","post","renderPosts","reset","Date","toLocaleDateString","toLocaleTimeString","slice","querySelectorAll","renderItem","_ref","postContent","prepend","showRecordBtns","btns","record","timer","btnSendRecord","btnCancelRecord","video","stopRecord","typeRecord","audio","stream","mediaDevices","getUserMedia","recorder","MediaRecorder","muted","srcObject","play","chunks","console","log","event","blob","Blob","URL","createObjectURL","start","seconds","minutes","timerId","setTimeout","stop","getTracks","track","clearTimeout","timeString","app"],"sourceRoot":""}